### 启动

#### default and classical

BIOS

Bootloader

Kernel

BIOS检查硬件POST 硬盘上的注引导记录MBR

找到MBR中的Bootloader

把操作系统的内核放到内存中 LILO or GRUB2

/boot/grub/grub.conf

initrd 临时挂载临时的虚拟根系统

linuxrc 为挂载真正的根文件系统做准备

real root FS

init process  -- pid=1 --

加载其他进程

#### init启动

系统启动的第一个进程 pid=1

串行顺序启动脚本

启动时间长

启动脚本复杂

#### systemd启动

系统启动的第一个进程 pid=1

按需启动服务

节约资源

并行加速启动

#### linux 运行级别

0 停机状态，系统默认运行级别不能设为0，否则不能正常启动

1 单用户工作状态 root权限用户 用于系统维护 禁止远程登录

2 多用户状态 没有NFS

3 完全的多用户状态 有NFS 登录后进入控制台命令行模式

4 系统未使用，保留

5 X11控制台 登录后进入图形GUI模式

6 系统正常关闭并重启，系统默认运行级别不能设为6，否则不能正常启动

poweroff

systemctl isolate rescure.target

systemctl isolate multi-user.target

systemctl isolate multi-user.target

systemctl isolate multi-user.target

systemctl isolate graphical.target

reboot

### 软件包管理工具

软件商发布软件安装包

安装 升级 卸载

#### 二进制包

rpm deb

#### 源码包

tar tar.gz zip rar xz

#### rpm

Redhet Package Manager

常用安装命令 rpm -ivh [文件名]

常用卸载命令 rpm -e [包名]

-i 安装

-U 升级

-e 移除删除

-v 显示详细的处理信息

-h 显示安装进度 卸载时不能用

-q 查询信息

#### deb

安装

sudo dpkg -i deb文件名

sudo dpkg --install deb文件名

查看安装的应用 sudo dpkg -l

卸载

sudo dpkg -r 软件包 保留配置

sudo dpkg -p 软件包 不保留配置

#### apt/apt-get

安装

sudo apt install 软件名

sudo apt --fix-broken install 软件名

GUI下可以直接双击deb文件开始安装

卸载无用的依赖

sudo apt autoremove 清除无用的依赖

sudo apt remove 软件名 

#### yum

需要新建源

yum clean all 清理缓存

yum -y install 软件名

#### 源码安装

./configure

make

make install

make clean

### 账户管理

#### 用户相关文件

/etc/passwd

/etc/shadow

/etc/group

/etc/gshadow

chsh -s /sbin/nologin username 用户不能在终端登录，但是可以运行应用

#### useradd

在CentOS下useradd与adduser是没有区别的都是在创建用户，在home下自动创建目录，没有设置密码，需要使用passwd命令修改密码。

而在Ubuntu下useradd与adduser有所不同。useradd在使用该命令创建用户是不会在/home下自动创建与用户名同名的用户目录，而且不会自动选择shell版本，也没有设置密码，那么这个用户是不能登录的，需要使用passwd命令修改密码。adduser在使用该命令创建用户是会在/home下自动创建与用户名同名的用户目录，系统shell版本，会在创建时会提示输入密码，更加友好。

管理员权限

创建用户

创建用户主目录

-d 设置用户主目录

-g 添加到用户组

-m 默认选项 用户主目录不存在就创建

-s 设置默认shell

#### passwd

passwd 用户名

管理员权限

检查口令规则

#### userdel



#### sudo

非root账户不需要知道root的密码就可以提权到root，执行一些root才能执行的命令

sudo -u 用户名 命令

不带-u默认使用root用户

给用户赋权sudo操作，需要将用户加入admin sudo wheel组，或者修改/etc/sudoers文件

#### /etc/sudoers文件

字段1 不以%开头表示将要授权的用户。以%开头的表示将要授权的组。

字段2 表示允许登录的主机，ALL表示所有，否则只能在某些机器上登录服务器执行sudo命令。

字段3 在等号后面，括弧中。如果省略想到于(root:root)，表示可以通过sudo提权到root。如果使用(ALL)或者(ALL:ALL)，表示可以提权到(任意用户:任意用户组)。

字段4 可能是NOPASSWD: 表示执行sudo时可以不输入密码

字段5 可以执行的命令，ALL表示可以执行所有的命令

字段